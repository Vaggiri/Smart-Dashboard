<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Analytics - SensorVision Dashboard</title>
    <link rel="stylesheet" href="../css/main.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400&display=swap" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/date-fns@2.29.3/index.min.js"></script>
<script type="module" src="https://static.rocket.new/rocket-web.js?_cfg=https%3A%2F%2Fsensorvisi9059back.builtwithrocket.new&_be=https%3A%2F%2Fapplication.rocket.new&_v=0.1.6"></script>
</head>
<body class="min-h-screen bg-slate-900 text-white">
    <!-- Particle Canvas Background -->
    <canvas id="particleCanvas" class="fixed inset-0 w-full h-full pointer-events-none z-0"></canvas>
    
    <!-- Header with Navigation -->
    <header class="relative z-20 bg-slate-800/90 backdrop-blur-sm border-b border-slate-700">
        <div class="flex items-center justify-between px-6 py-4">
            <!-- Logo -->
            <div class="flex items-center space-x-3">
                <div class="w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center">
                    <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
                    </svg>
                </div>
                <div>
                    <h1 class="text-xl font-semibold text-white">SensorVision</h1>
                    <p class="text-xs text-slate-400">IoT Monitoring Dashboard</p>
                </div>
            </div>

            <!-- Navigation Tabs -->
            <nav class="flex space-x-1">
                <a href="dashboard.html" class="px-4 py-2 rounded-lg text-slate-300 hover:text-white hover:bg-slate-700 transition-smooth">
                    <div class="flex items-center space-x-2">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"/>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5a2 2 0 012-2h2a2 2 0 012 2v6H8V5z"/>
                        </svg>
                        <span>Dashboard</span>
                    </div>
                </a>
                <a href="analytics.html" class="px-4 py-2 rounded-lg bg-blue-600 text-white">
                    <div class="flex items-center space-x-2">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
                        </svg>
                        <span>Analytics</span>
                    </div>
                </a>
                <a href="settings.html" class="px-4 py-2 rounded-lg text-slate-300 hover:text-white hover:bg-slate-700 transition-smooth">
                    <div class="flex items-center space-x-2">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                        </svg>
                        <span>Settings</span>
                    </div>
                </a>
            </nav>

            <!-- User Menu & Theme Toggle -->
            <div class="flex items-center space-x-3">
                <button id="themeToggle" class="p-2 rounded-lg bg-slate-700 hover:bg-slate-600 transition-smooth border border-slate-600">
                    <svg id="sunIcon" class="w-5 h-5 text-yellow-400 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/>
                    </svg>
                    <svg id="moonIcon" class="w-5 h-5 text-slate-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"/>
                    </svg>
                </button>
                
                <div class="flex items-center space-x-2 text-sm">
                    <div class="w-8 h-8 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center">
                        <span class="text-white font-medium">A</span>
                    </div>
                    <span class="text-slate-300">Admin</span>
                </div>
                
                <a href="login.html" class="p-2 rounded-lg text-slate-400 hover:text-white hover:bg-slate-700 transition-smooth" title="Logout">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"/>
                    </svg>
                </a>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="relative z-10 flex h-screen pt-20">
        <!-- Sidebar Filters -->
        <aside id="sidebar" class="w-80 bg-slate-800/90 backdrop-blur-sm border-r border-slate-700 p-6 overflow-y-auto">
            <div class="space-y-6">
                <!-- Page Title -->
                <div>
                    <h2 class="text-xl font-semibold text-white mb-2">Analytics Dashboard</h2>
                    <p class="text-sm text-slate-400">Historical data analysis and trends</p>
                </div>

                <!-- Date Range Picker -->
                <div class="space-y-3">
                    <label class="block text-sm font-medium text-slate-300">Date Range</label>
                    <div class="grid grid-cols-2 gap-3">
                        <div>
                            <label class="block text-xs text-slate-400 mb-1">From</label>
                            <input type="date" id="startDate" class="w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-500" />
                        </div>
                        <div>
                            <label class="block text-xs text-slate-400 mb-1">To</label>
                            <input type="date" id="endDate" class="w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-500" />
                        </div>
                    </div>
                    <div class="flex space-x-2">
                        <button class="quick-range px-3 py-1 text-xs bg-slate-700 hover:bg-slate-600 rounded-md transition-smooth" data-range="7">7D</button>
                        <button class="quick-range px-3 py-1 text-xs bg-slate-700 hover:bg-slate-600 rounded-md transition-smooth" data-range="30">30D</button>
                        <button class="quick-range px-3 py-1 text-xs bg-slate-700 hover:bg-slate-600 rounded-md transition-smooth" data-range="90">90D</button>
                    </div>
                </div>

                <!-- Parameter Selection -->
                <div class="space-y-3">
                    <label class="block text-sm font-medium text-slate-300">Parameters</label>
                    <div class="space-y-2">
                        <label class="flex items-center space-x-3">
                            <input type="checkbox" id="tempCheck" checked class="w-4 h-4 text-blue-600 bg-slate-700 border-slate-600 rounded focus:ring-blue-500" />
                            <div class="flex items-center space-x-2">
                                <div class="w-3 h-3 bg-red-500 rounded-full"></div>
                                <span class="text-sm text-slate-300">Temperature (°C)</span>
                            </div>
                        </label>
                        <label class="flex items-center space-x-3">
                            <input type="checkbox" id="humidityCheck" checked class="w-4 h-4 text-blue-600 bg-slate-700 border-slate-600 rounded focus:ring-blue-500" />
                            <div class="flex items-center space-x-2">
                                <div class="w-3 h-3 bg-blue-500 rounded-full"></div>
                                <span class="text-sm text-slate-300">Humidity (%)</span>
                            </div>
                        </label>
                        <label class="flex items-center space-x-3">
                            <input type="checkbox" id="carbonCheck" checked class="w-4 h-4 text-blue-600 bg-slate-700 border-slate-600 rounded focus:ring-blue-500" />
                            <div class="flex items-center space-x-2">
                                <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                                <span class="text-sm text-slate-300">Carbon (ppm)</span>
                            </div>
                        </label>
                    </div>
                </div>

                <!-- Time Interval -->
                <div class="space-y-3">
                    <label class="block text-sm font-medium text-slate-300">Time Interval</label>
                    <select id="timeInterval" class="w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <option value="hourly">Hourly</option>
                        <option value="daily" selected>Daily</option>
                        <option value="weekly">Weekly</option>
                        <option value="monthly">Monthly</option>
                    </select>
                </div>

                <!-- Alert Thresholds -->
                <div class="space-y-3">
                    <label class="block text-sm font-medium text-slate-300">Alert Thresholds</label>
                    <div class="space-y-3">
                        <div>
                            <label class="block text-xs text-slate-400 mb-1">Temperature (°C)</label>
                            <div class="grid grid-cols-2 gap-2">
                                <input type="number" placeholder="Min" class="px-2 py-1 bg-slate-700 border border-slate-600 rounded text-white text-xs focus:outline-none focus:ring-1 focus:ring-blue-500" />
                                <input type="number" placeholder="Max" class="px-2 py-1 bg-slate-700 border border-slate-600 rounded text-white text-xs focus:outline-none focus:ring-1 focus:ring-blue-500" />
                            </div>
                        </div>
                        <div>
                            <label class="block text-xs text-slate-400 mb-1">Humidity (%)</label>
                            <div class="grid grid-cols-2 gap-2">
                                <input type="number" placeholder="Min" class="px-2 py-1 bg-slate-700 border border-slate-600 rounded text-white text-xs focus:outline-none focus:ring-1 focus:ring-blue-500" />
                                <input type="number" placeholder="Max" class="px-2 py-1 bg-slate-700 border border-slate-600 rounded text-white text-xs focus:outline-none focus:ring-1 focus:ring-blue-500" />
                            </div>
                        </div>
                        <div>
                            <label class="block text-xs text-slate-400 mb-1">Carbon (ppm)</label>
                            <div class="grid grid-cols-2 gap-2">
                                <input type="number" placeholder="Min" class="px-2 py-1 bg-slate-700 border border-slate-600 rounded text-white text-xs focus:outline-none focus:ring-1 focus:ring-blue-500" />
                                <input type="number" placeholder="Max" class="px-2 py-1 bg-slate-700 border border-slate-600 rounded text-white text-xs focus:outline-none focus:ring-1 focus:ring-blue-500" />
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Export Options -->
                <div class="space-y-3">
                    <label class="block text-sm font-medium text-slate-300">Export Data</label>
                    <div class="space-y-2">
                        <button id="exportCSV" class="w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-smooth text-sm">
                            <div class="flex items-center justify-center space-x-2">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                                </svg>
                                <span>Export CSV</span>
                            </div>
                        </button>
                        <button id="exportPDF" class="w-full px-4 py-2 bg-slate-600 hover:bg-slate-500 text-white rounded-lg transition-smooth text-sm">
                            <div class="flex items-center justify-center space-x-2">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"/>
                                </svg>
                                <span>Export PDF</span>
                            </div>
                        </button>
                    </div>
                </div>

                <!-- Mobile Toggle Button -->
                <button id="sidebarToggle" class="lg:hidden fixed top-24 left-4 z-30 p-2 bg-slate-800 rounded-lg border border-slate-700">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
                    </svg>
                </button>
            </div>
        </aside>

        <!-- Main Content Area -->
        <div class="flex-1 p-6 overflow-y-auto">
            <!-- Loading Indicator -->
            <div id="loadingIndicator" class="hidden fixed inset-0 bg-slate-900/50 backdrop-blur-sm z-50 flex items-center justify-center">
                <div class="bg-slate-800 rounded-lg p-6 flex items-center space-x-3">
                    <svg class="animate-spin w-5 h-5 text-blue-500" fill="none" viewBox="0 0 24 24">
                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"/>
                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"/>
                    </svg>
                    <span class="text-white">Updating charts...</span>
                </div>
            </div>

            <!-- Statistics Summary -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                <div class="bg-slate-800/90 backdrop-blur-sm rounded-lg p-6 border border-slate-700">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-white">Temperature</h3>
                        <div class="w-3 h-3 bg-red-500 rounded-full"></div>
                    </div>
                    <div class="space-y-2">
                        <div class="flex justify-between text-sm">
                            <span class="text-slate-400">Average:</span>
                            <span class="text-white font-mono" id="tempAvg">24.5°C</span>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span class="text-slate-400">Min:</span>
                            <span class="text-white font-mono" id="tempMin">18.2°C</span>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span class="text-slate-400">Max:</span>
                            <span class="text-white font-mono" id="tempMax">31.8°C</span>
                        </div>
                    </div>
                </div>

                <div class="bg-slate-800/90 backdrop-blur-sm rounded-lg p-6 border border-slate-700">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-white">Humidity</h3>
                        <div class="w-3 h-3 bg-blue-500 rounded-full"></div>
                    </div>
                    <div class="space-y-2">
                        <div class="flex justify-between text-sm">
                            <span class="text-slate-400">Average:</span>
                            <span class="text-white font-mono" id="humidityAvg">65.3%</span>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span class="text-slate-400">Min:</span>
                            <span class="text-white font-mono" id="humidityMin">42.1%</span>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span class="text-slate-400">Max:</span>
                            <span class="text-white font-mono" id="humidityMax">89.7%</span>
                        </div>
                    </div>
                </div>

                <div class="bg-slate-800/90 backdrop-blur-sm rounded-lg p-6 border border-slate-700">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-white">Carbon</h3>
                        <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                    </div>
                    <div class="space-y-2">
                        <div class="flex justify-between text-sm">
                            <span class="text-slate-400">Average:</span>
                            <span class="text-white font-mono" id="carbonAvg">412 ppm</span>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span class="text-slate-400">Min:</span>
                            <span class="text-white font-mono" id="carbonMin">385 ppm</span>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span class="text-slate-400">Max:</span>
                            <span class="text-white font-mono" id="carbonMax">445 ppm</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Primary Time Series Chart -->
            <div class="bg-slate-800/90 backdrop-blur-sm rounded-lg p-6 border border-slate-700 mb-6">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-semibold text-white">Historical Trends</h3>
                    <div class="flex items-center space-x-4">
                        <div class="flex items-center space-x-2 text-sm">
                            <span class="text-slate-400">Last updated:</span>
                            <span class="text-white font-mono" id="lastUpdated">Aug 11, 2025 5:25 PM</span>
                        </div>
                        <button id="refreshChart" class="p-2 bg-slate-700 hover:bg-slate-600 rounded-lg transition-smooth">
                            <svg class="w-4 h-4 text-slate-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="h-96">
                    <canvas id="timeSeriesChart"></canvas>
                </div>
            </div>

            <!-- Comparison Charts -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                <!-- Period Comparison -->
                <div class="bg-slate-800/90 backdrop-blur-sm rounded-lg p-6 border border-slate-700">
                    <h3 class="text-lg font-semibold text-white mb-4">Period Comparison</h3>
                    <div class="h-64">
                        <canvas id="comparisonChart"></canvas>
                    </div>
                </div>

                <!-- Distribution Chart -->
                <div class="bg-slate-800/90 backdrop-blur-sm rounded-lg p-6 border border-slate-700">
                    <h3 class="text-lg font-semibold text-white mb-4">Value Distribution</h3>
                    <div class="h-64">
                        <canvas id="distributionChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Data Table -->
            <div class="bg-slate-800/90 backdrop-blur-sm rounded-lg p-6 border border-slate-700">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-semibold text-white">Detailed Data</h3>
                    <div class="flex items-center space-x-2">
                        <input type="text" placeholder="Search..." class="px-3 py-1 bg-slate-700 border border-slate-600 rounded-lg text-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-500" />
                        <button class="p-2 bg-slate-700 hover:bg-slate-600 rounded-lg transition-smooth">
                            <svg class="w-4 h-4 text-slate-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="overflow-x-auto">
                    <table class="w-full text-sm">
                        <thead>
                            <tr class="border-b border-slate-700">
                                <th class="text-left py-3 px-4 text-slate-300 font-medium">Timestamp</th>
                                <th class="text-left py-3 px-4 text-slate-300 font-medium">Temperature</th>
                                <th class="text-left py-3 px-4 text-slate-300 font-medium">Humidity</th>
                                <th class="text-left py-3 px-4 text-slate-300 font-medium">Carbon</th>
                                <th class="text-left py-3 px-4 text-slate-300 font-medium">Location</th>
                            </tr>
                        </thead>
                        <tbody id="dataTableBody">
                            <tr class="border-b border-slate-700/50 hover:bg-slate-700/30">
                                <td class="py-3 px-4 text-white font-mono">2025-08-11 17:25</td>
                                <td class="py-3 px-4 text-red-400 font-mono">24.5°C</td>
                                <td class="py-3 px-4 text-blue-400 font-mono">65.3%</td>
                                <td class="py-3 px-4 text-green-400 font-mono">412 ppm</td>
                                <td class="py-3 px-4 text-slate-300 font-mono">10.9038, 76.9003</td>
                            </tr>
                            <tr class="border-b border-slate-700/50 hover:bg-slate-700/30">
                                <td class="py-3 px-4 text-white font-mono">2025-08-11 17:20</td>
                                <td class="py-3 px-4 text-red-400 font-mono">24.2°C</td>
                                <td class="py-3 px-4 text-blue-400 font-mono">66.1%</td>
                                <td class="py-3 px-4 text-green-400 font-mono">415 ppm</td>
                                <td class="py-3 px-4 text-slate-300 font-mono">10.9038, 76.9003</td>
                            </tr>
                            <tr class="border-b border-slate-700/50 hover:bg-slate-700/30">
                                <td class="py-3 px-4 text-white font-mono">2025-08-11 17:15</td>
                                <td class="py-3 px-4 text-red-400 font-mono">23.8°C</td>
                                <td class="py-3 px-4 text-blue-400 font-mono">67.2%</td>
                                <td class="py-3 px-4 text-green-400 font-mono">418 ppm</td>
                                <td class="py-3 px-4 text-slate-300 font-mono">10.9038, 76.9003</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="flex items-center justify-between mt-4 text-sm text-slate-400">
                    <span>Showing 3 of 1,247 entries</span>
                    <div class="flex space-x-2">
                        <button class="px-3 py-1 bg-slate-700 hover:bg-slate-600 rounded transition-smooth">Previous</button>
                        <button class="px-3 py-1 bg-blue-600 text-white rounded">1</button>
                        <button class="px-3 py-1 bg-slate-700 hover:bg-slate-600 rounded transition-smooth">2</button>
                        <button class="px-3 py-1 bg-slate-700 hover:bg-slate-600 rounded transition-smooth">3</button>
                        <button class="px-3 py-1 bg-slate-700 hover:bg-slate-600 rounded transition-smooth">Next</button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        // Particle Canvas Animation (same as login page)
        class ParticleSystem {
            constructor(canvas) {
                this.canvas = canvas;
                this.ctx = canvas.getContext('2d');
                this.particles = [];
                this.particleCount = 30;
                this.connectionDistance = 120;
                
                this.resize();
                this.init();
                this.animate();
                
                window.addEventListener('resize', () => this.resize());
            }
            
            resize() {
                this.canvas.width = window.innerWidth;
                this.canvas.height = window.innerHeight;
            }
            
            init() {
                this.particles = [];
                for (let i = 0; i < this.particleCount; i++) {
                    this.particles.push({
                        x: Math.random() * this.canvas.width,
                        y: Math.random() * this.canvas.height,
                        vx: (Math.random() - 0.5) * 0.3,
                        vy: (Math.random() - 0.5) * 0.3,
                        size: Math.random() * 1.5 + 0.5
                    });
                }
            }
            
            animate() {
                this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
                
                this.particles.forEach(particle => {
                    particle.x += particle.vx;
                    particle.y += particle.vy;
                    
                    if (particle.x < 0 || particle.x > this.canvas.width) particle.vx *= -1;
                    if (particle.y < 0 || particle.y > this.canvas.height) particle.vy *= -1;
                    
                    particle.x = Math.max(0, Math.min(this.canvas.width, particle.x));
                    particle.y = Math.max(0, Math.min(this.canvas.height, particle.y));
                });
                
                this.ctx.strokeStyle = 'rgba(59, 130, 246, 0.08)';
                this.ctx.lineWidth = 1;
                
                for (let i = 0; i < this.particles.length; i++) {
                    for (let j = i + 1; j < this.particles.length; j++) {
                        const dx = this.particles[i].x - this.particles[j].x;
                        const dy = this.particles[i].y - this.particles[j].y;
                        const distance = Math.sqrt(dx * dx + dy * dy);
                        
                        if (distance < this.connectionDistance) {
                            const opacity = (this.connectionDistance - distance) / this.connectionDistance * 0.15;
                            this.ctx.strokeStyle = `rgba(59, 130, 246, ${opacity})`;
                            this.ctx.beginPath();
                            this.ctx.moveTo(this.particles[i].x, this.particles[i].y);
                            this.ctx.lineTo(this.particles[j].x, this.particles[j].y);
                            this.ctx.stroke();
                        }
                    }
                }
                
                this.ctx.fillStyle = 'rgba(59, 130, 246, 0.4)';
                this.particles.forEach(particle => {
                    this.ctx.beginPath();
                    this.ctx.arc(particle.x, particle.y, particle.size, 0, Math.PI * 2);
                    this.ctx.fill();
                });
                
                requestAnimationFrame(() => this.animate());
            }
        }
        
        // Initialize particle system
        const canvas = document.getElementById('particleCanvas');
        new ParticleSystem(canvas);

        // Theme Toggle
        const themeToggle = document.getElementById('themeToggle');
        const sunIcon = document.getElementById('sunIcon');
        const moonIcon = document.getElementById('moonIcon');
        let isDark = true;
        
        themeToggle.addEventListener('click', () => {
            isDark = !isDark;
            if (isDark) {
                document.body.className = 'min-h-screen bg-slate-900 text-white';
                sunIcon.classList.add('hidden');
                moonIcon.classList.remove('hidden');
            } else {
                document.body.className = 'min-h-screen bg-slate-100 text-slate-900';
                sunIcon.classList.remove('hidden');
                moonIcon.classList.add('hidden');
            }
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
        });

        // Sidebar Toggle for Mobile
        const sidebar = document.getElementById('sidebar');
        const sidebarToggle = document.getElementById('sidebarToggle');
        
        sidebarToggle.addEventListener('click', () => {
            sidebar.classList.toggle('-translate-x-full');
        });

        // Initialize Charts
        let timeSeriesChart, comparisonChart, distributionChart;

        // Generate mock data
        function generateMockData(days = 30) {
            const data = [];
            const now = new Date();
            
            for (let i = days; i >= 0; i--) {
                const date = new Date(now.getTime() - i * 24 * 60 * 60 * 1000);
                data.push({
                    timestamp: date,
                    temperature: 20 + Math.random() * 15 + Math.sin(i * 0.1) * 5,
                    humidity: 50 + Math.random() * 30 + Math.cos(i * 0.15) * 10,
                    carbon: 380 + Math.random() * 80 + Math.sin(i * 0.08) * 20
                });
            }
            return data;
        }

        const mockData = generateMockData();

        // Initialize Time Series Chart
        function initTimeSeriesChart() {
            const ctx = document.getElementById('timeSeriesChart').getContext('2d');
            
            timeSeriesChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: mockData.map(d => d.timestamp.toLocaleDateString()),
                    datasets: [
                        {
                            label: 'Temperature (°C)',
                            data: mockData.map(d => d.temperature),
                            borderColor: 'rgb(239, 68, 68)',
                            backgroundColor: 'rgba(239, 68, 68, 0.1)',
                            tension: 0.4,
                            fill: false
                        },
                        {
                            label: 'Humidity (%)',
                            data: mockData.map(d => d.humidity),
                            borderColor: 'rgb(59, 130, 246)',
                            backgroundColor: 'rgba(59, 130, 246, 0.1)',
                            tension: 0.4,
                            fill: false
                        },
                        {
                            label: 'Carbon (ppm)',
                            data: mockData.map(d => d.carbon),
                            borderColor: 'rgb(34, 197, 94)',
                            backgroundColor: 'rgba(34, 197, 94, 0.1)',
                            tension: 0.4,
                            fill: false,
                            yAxisID: 'y1'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    interaction: {
                        mode: 'index',
                        intersect: false,
                    },
                    plugins: {
                        legend: {
                            labels: {
                                color: 'rgb(203, 213, 225)'
                            }
                        },
                        tooltip: {
                            backgroundColor: 'rgba(30, 41, 59, 0.9)',
                            titleColor: 'rgb(248, 250, 252)',
                            bodyColor: 'rgb(203, 213, 225)',
                            borderColor: 'rgb(71, 85, 105)',
                            borderWidth: 1
                        }
                    },
                    scales: {
                        x: {
                            grid: {
                                color: 'rgba(71, 85, 105, 0.3)'
                            },
                            ticks: {
                                color: 'rgb(148, 163, 184)'
                            }
                        },
                        y: {
                            type: 'linear',
                            display: true,
                            position: 'left',
                            grid: {
                                color: 'rgba(71, 85, 105, 0.3)'
                            },
                            ticks: {
                                color: 'rgb(148, 163, 184)'
                            }
                        },
                        y1: {
                            type: 'linear',
                            display: true,
                            position: 'right',
                            grid: {
                                drawOnChartArea: false,
                            },
                            ticks: {
                                color: 'rgb(148, 163, 184)'
                            }
                        }
                    }
                }
            });
        }

        // Initialize Comparison Chart
        function initComparisonChart() {
            const ctx = document.getElementById('comparisonChart').getContext('2d');
            
            comparisonChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['This Week', 'Last Week', 'This Month', 'Last Month'],
                    datasets: [
                        {
                            label: 'Avg Temperature',
                            data: [24.5, 23.8, 25.2, 24.1],
                            backgroundColor: 'rgba(239, 68, 68, 0.8)',
                        },
                        {
                            label: 'Avg Humidity',
                            data: [65.3, 62.1, 68.7, 64.5],
                            backgroundColor: 'rgba(59, 130, 246, 0.8)',
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: {
                                color: 'rgb(203, 213, 225)'
                            }
                        }
                    },
                    scales: {
                        x: {
                            grid: {
                                color: 'rgba(71, 85, 105, 0.3)'
                            },
                            ticks: {
                                color: 'rgb(148, 163, 184)'
                            }
                        },
                        y: {
                            grid: {
                                color: 'rgba(71, 85, 105, 0.3)'
                            },
                            ticks: {
                                color: 'rgb(148, 163, 184)'
                            }
                        }
                    }
                }
            });
        }

        // Initialize Distribution Chart
        function initDistributionChart() {
            const ctx = document.getElementById('distributionChart').getContext('2d');
            
            distributionChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Normal', 'High', 'Low', 'Critical'],
                    datasets: [{
                        data: [65, 20, 10, 5],
                        backgroundColor: [
                            'rgba(34, 197, 94, 0.8)',
                            'rgba(251, 191, 36, 0.8)',
                            'rgba(59, 130, 246, 0.8)',
                            'rgba(239, 68, 68, 0.8)'
                        ],
                        borderWidth: 2,
                        borderColor: 'rgb(30, 41, 59)'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                color: 'rgb(203, 213, 225)',
                                padding: 20
                            }
                        }
                    }
                }
            });
        }

        // Initialize all charts
        initTimeSeriesChart();
        initComparisonChart();
        initDistributionChart();

        // Date range functionality
        const startDate = document.getElementById('startDate');
        const endDate = document.getElementById('endDate');
        const quickRangeButtons = document.querySelectorAll('.quick-range');

        // Set default dates
        const today = new Date();
        const thirtyDaysAgo = new Date(today.getTime() - 30 * 24 * 60 * 60 * 1000);
        
        startDate.value = thirtyDaysAgo.toISOString().split('T')[0];
        endDate.value = today.toISOString().split('T')[0];

        // Quick range buttons
        quickRangeButtons.forEach(button => {
            button.addEventListener('click', () => {
                const days = parseInt(button.dataset.range);
                const end = new Date();
                const start = new Date(end.getTime() - days * 24 * 60 * 60 * 1000);
                
                startDate.value = start.toISOString().split('T')[0];
                endDate.value = end.toISOString().split('T')[0];
                
                updateCharts();
            });
        });

        // Parameter checkboxes
        const parameterCheckboxes = document.querySelectorAll('input[type="checkbox"]');
        parameterCheckboxes.forEach(checkbox => {
            checkbox.addEventListener('change', updateCharts);
        });

        // Time interval selector
        document.getElementById('timeInterval').addEventListener('change', updateCharts);

        // Update charts function
        function updateCharts() {
            const loadingIndicator = document.getElementById('loadingIndicator');
            loadingIndicator.classList.remove('hidden');
            
            setTimeout(() => {
                // Simulate data update
                const newData = generateMockData();
                
                // Update time series chart
                timeSeriesChart.data.labels = newData.map(d => d.timestamp.toLocaleDateString());
                timeSeriesChart.data.datasets[0].data = newData.map(d => d.temperature);
                timeSeriesChart.data.datasets[1].data = newData.map(d => d.humidity);
                timeSeriesChart.data.datasets[2].data = newData.map(d => d.carbon);
                timeSeriesChart.update();
                
                // Update statistics
                updateStatistics(newData);
                
                loadingIndicator.classList.add('hidden');
            }, 1000);
        }

        // Update statistics
        function updateStatistics(data) {
            const temps = data.map(d => d.temperature);
            const humidity = data.map(d => d.humidity);
            const carbon = data.map(d => d.carbon);
            
            document.getElementById('tempAvg').textContent = `${(temps.reduce((a, b) => a + b) / temps.length).toFixed(1)}°C`;
            document.getElementById('tempMin').textContent = `${Math.min(...temps).toFixed(1)}°C`;
            document.getElementById('tempMax').textContent = `${Math.max(...temps).toFixed(1)}°C`;
            
            document.getElementById('humidityAvg').textContent = `${(humidity.reduce((a, b) => a + b) / humidity.length).toFixed(1)}%`;
            document.getElementById('humidityMin').textContent = `${Math.min(...humidity).toFixed(1)}%`;
            document.getElementById('humidityMax').textContent = `${Math.max(...humidity).toFixed(1)}%`;
            
            document.getElementById('carbonAvg').textContent = `${Math.round(carbon.reduce((a, b) => a + b) / carbon.length)} ppm`;
            document.getElementById('carbonMin').textContent = `${Math.round(Math.min(...carbon))} ppm`;
            document.getElementById('carbonMax').textContent = `${Math.round(Math.max(...carbon))} ppm`;
        }

        // Export functionality
        document.getElementById('exportCSV').addEventListener('click', () => {
            const csvContent = "data:text/csv;charset=utf-8," 
                + "Timestamp,Temperature,Humidity,Carbon\n"
                + mockData.map(d => `${d.timestamp.toISOString()},${d.temperature.toFixed(2)},${d.humidity.toFixed(2)},${d.carbon.toFixed(2)}`).join("\n");
            
            const encodedUri = encodeURI(csvContent);
            const link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", "sensor_data.csv");
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        });

        document.getElementById('exportPDF').addEventListener('click', () => {
            alert('PDF export functionality would be implemented with a library like jsPDF');
        });

        // Refresh chart
        document.getElementById('refreshChart').addEventListener('click', () => {
            updateCharts();
            document.getElementById('lastUpdated').textContent = new Date().toLocaleString();
        });

        // Initialize statistics
        updateStatistics(mockData);
    </script>
<script id="dhws-dataInjector" src="../public/dhws-data-injector.js"></script>
</body>
</html>